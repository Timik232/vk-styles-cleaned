# Changelog

All notable changes to VK Styles Clean will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/),
and this project adheres to [Semantic Versioning](https://semver.org/).

## [2.0.5.7] - 2025-02-22

### Fixed
- Исправлено наложение элементов меню боковой панели в режиме «Фикс» при скролле (футер перекрывал пункты меню)

## [2.0.5.6] - 2025-02-22

### Changed
- Заменена ссылка на паблик атакующего (/2style) на ссылку на GitHub-репозиторий
- Удалена кнопка обновления версии из боковой панели
- Удалены элементы «Темы для ВК» и «Живые обои» из нижней части панели (ссылались на группу атакующего)
- Добавлено сообщение «Поставьте ⭐ звёздочку на GitHub» в панель и README

## [2.0.5.5] - 2026-02-22

### Fixed
- Исправлена ошибка "Cannot access contents of the page" в Яндекс Браузере — добавлен `.catch()` и `.filter(Boolean)` в `executeScript` вызов

## [2.0.5.4] - 2026-02-22

### Added
- Ссылка на добровольное пожертвование (DonationAlerts) в README

## [2.0.5.3] - 2026-02-22

### Fixed
- Исправлено сочетание Alt+B для тогла фона — добавлен preventDefault/stopPropagation для предотвращения перехвата VK

## [2.0.5.2] - 2026-02-22

### Fixed
- Колёсико мыши больше не меняет громкость на всей странице музыки — только на панели плеера

## [2.0.5.1] - 2026-02-21

### Fixed
- Колёсико мыши теперь регулирует громкость на всей панели музыки без визуализатора (делегированный слушатель на body)
- Надёжное прикрепление слушателей к топ-плееру через fallback getElementById и MutationObserver
- Добавлен флаг `-r` в RAR-сборку релиза для включения `_locales/` с подпапками

## [2.0.5] - 2026-02-21

### Fixed
- Исправлена регулировка громкости колёсиком мыши при активном эквалайзере/визуализаторе
- Ползунок громкости VK теперь показывает реальное значение (не застревает на 100%) при активном эквалайзере
- GainNode переведён в passthrough-режим (усиление=1), громкость управляется нативно через VK
- Колёсико мыши теперь регулирует громкость при наведении на всю панель музыки сверху, а не только на ползунок

## [2.0.4] - 2026-02-21

### Fixed
- Исправлено изменение размера эмодзи — обновлены CSS-селекторы для нового DOM VK (`.Emoji`)

### Security
- Сужен `web_accessible_resources` с `["*"]` до минимально необходимых файлов (`2.js`, `css`, `mcss`, `i/*`)
- Удалён мёртвый код `plus()`/`less()` — остатки малварного механизма промо/пейволла оригинального расширения

## [2.0.3] - 2026-02-20

### Fixed
- Фон (изображение и видео) больше не пропадает при переключении вкладок и простое
- Исправлен краш обработчика ошибок VK-видео при отсутствии резервных URL
- VK-видео и документы автоматически перезагружаются при истечении ссылки
- YouTube/Vimeo-фоны перезагружаются при длительном простое вкладки (>30 сек)

## [2.0.2.1] - 2026-02-20

### Fixed
- Скрыт юридический текст внизу сайдбара в мини-режиме («Журнал», «Авторам», реклама)

## [2.0.2] - 2026-02-20

### Fixed
- Исправлена работа режима «Мини» — теперь корректно скрывает текст, оставляя только иконки с подсказками
- Исправлен фон боковой панели — больше не обрезает элементы меню
- Исправлена совместимость фона и мини-режима при одновременном включении
- Исправлена битая ссылка на исследование Koi Security в README

### Added
- Добавлена инструкция по установке в Яндекс Браузере

## [2.0.1] - 2026-02-15

### Fixed
- Исправлен баг визуализатора: ESC скрывал весь `#page_header_cont`
- Исправлен фон боковой панели (overflow:hidden)

### Added
- Начальные CSS-правила для режима мини-сайдбара
- GitHub Actions CI (security.yml) и CD (release.yml)
- Contributing guide, VK disclaimer, README

## [2.0.0] - 2026-02-10

### Security
- Удалён удалённый код-загрузчик (`eval`/`Function` через VK-профиль)
- Удалена принудительная подписка на группу злоумышленника
- Удалён сброс настроек каждые 30 дней
- Удалена манипуляция CSRF-токенами (`remixsec_redir`)
- Удалена Яндекс.Метрика с динамическим ID
- Удалён redirect при деинсталляции
- Удалены все обращения к внешним серверам

### Changed
- Ребрендинг в «VK Styles Clean»
- Исправлены эмодзи-реакции и настройки IMU по умолчанию
